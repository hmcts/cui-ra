{% extends "template.njk" %}

{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/table/macro.njk" import govukTable %}
{%- from "govuk/components/tag/macro.njk" import govukTag -%}

{% block beforeContent %}
    {{ super() }}
    {{ govukBackLink({
        text: _t('back'),
        href: headers['referer']
    }) }}
{% endblock %}

{% block mainContent %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <h1 class="govuk-heading-xl">{{ _r(_t('support_for_name'), { name: partyname }) }}</h1>
        <a href="/home/intro" class="govuk-link govuk-link--no-visited-state">{{ _t('overview.change_my_support_options') }}</a>

        <table class="govuk-table govuk-!-margin-top-8">
            <caption class="govuk-table__caption govuk-table__caption--m">{{ _t('overview.table_heading') }}</caption>
            <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                <th scope="col" class="govuk-table__header">{{ _t('overview.column_1_heading') }}</th>
                <th scope="col" class="govuk-table__header">{{ _t('overview.column_2_heading') }}</th>
                </tr>
            </thead>
            <tbody class="govuk-table__body">
                {% for item in existingFlags %}
                    <tr class="govuk-table__row">
                    <td scope="row" class="govuk-table__cell">
                        {{ item.value.name }}
                    </td>
                    {% if item.value.status == status.REQUESTED %}
                        <td class="govuk-table__cell">
                            <strong class="govuk-tag govuk-tag--yellow">
                                {{ _t('overview.status.requested') }}
                            </strong>
                        </td>
                    {% elseif item.value.status == status.ACTIVE %}
                        <td class="govuk-table__cell">
                            <strong class="govuk-tag govuk-tag--turquoise">
                                {{ _t('overview.status.active') }}
                            </strong>
                        </td>
                    {% elseif item.value.status == status.INACTIVE %}
                        <td class="govuk-table__cell">
                            <strong class="govuk-tag govuk-tag--grey">
                                {{ _t('overview.status.inactive') }}
                            </strong>
                        </td>
                    {% elseif item.value.status == status.NOT_APPROVED %}
                        <td class="govuk-table__cell">
                            <strong class="govuk-tag govuk-tag--orange">
                                {{ _t('overview.status.not_approved') }}
                            </strong>
                        </td>
                    {% endif %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
  </div>
{% endblock %}